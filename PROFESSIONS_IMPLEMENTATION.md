# Разработка страницы "Абитуриенты" - Полный отчет

## Обзор проекта

Реализована интеграция данных о востребованных профессиях на страницу абитуриентов с:
- Сбором данных из официальных источников (Минтруд, Мингорисполком)
- Созданием структуры базы данных
- Разработкой UI компонентов
- Интеграцией в существующую страницу

---

## Этап 1: Сбор данных

### Созданные файлы
```
scripts/data-collection/
├── collect-forecasts.ts           # Сбор прогнозов из 3 источников
├── collect-salaries.ts            # Данные о зарплатах (70 профессий)
├── package.json                   # Конфигурация
├── README.md                      # Документация
├── STAGE1_SUMMARY.md             # Отчет по этапу 1
└── output/
    ├── profession-forecasts-2026.json   # 83 профессии
    ├── profession-forecasts-2026.sql    # SQL для импорта
    ├── profession-salaries-2026.json    # 70 записей
    ├── profession-salaries-2026.sql     # SQL для импорта
    ├── collection-report.json           # Статистика
    └── salary-summary.json              # Сводка
```

### Источники данных
1. **myfin.by** - Прогноз Мингорисполкома (декабрь 2025)
2. **neg.by** - Расширенный прогноз Мингорисполкома (январь 2026)
3. **kudapostupat.by** - Прогноз Минтруда на 2026-2030 (декабрь 2025)

### Статистика собранных данных
- **Всего профессий**: 83
- **Высокий спрос**: 57 профессий
- **Низкий спрос**: 25 профессий
- **По категориям**: 45 рабочих, 28 служащих, 10 специалистов
- **Зарплатных данных**: 70 профессий
- **Всего вакансий в датасете**: 21,020

### Топ-10 по зарплате
1. Программист - 4500 BYN
2. Специалист по веб-порталам - 4200 BYN
3. Тестировщик ПО - 3200 BYN
4. Инженер-строитель - 2900 BYN
5. Техник-программист - 2800 BYN
6. Инженер - 2800 BYN
7. Инженер-механик - 2700 BYN
8. Инженер-технолог - 2600 BYN
9. Врач-специалист - 2500 BYN
10. Инженер по контролю качества - 2400 BYN

---

## Этап 2: Разработка компонентов

### Созданные файлы

#### Типы данных
```typescript
src/types/professions.ts
├── ProfessionAnalytics    # Объединенные данные (прогнозы + зарплаты)
├── ProfessionForecast     # Прогнозы востребованности
├── ProfessionSalary       # Данные о зарплатах
├── ProfessionFilters      # Фильтры
└── ProfessionStats        # Статистика
```

#### API Сервис
```typescript
src/services/professionService.ts
├── getProfessions()           # Получение с фильтрами
├── getTopProfessions()        # Топ по рейтингу
├── getProfessionsByDemand()   # По уровню спроса
├── getProfessionsByCategory() # По категории
├── getStats()                 # Общая статистика
├── getCareerPath()            # Карьерный путь
└── getSalaryHistory()         # История зарплат
```

#### React Hooks
```typescript
src/hooks/useProfessions.ts
├── useProfessions()       # Основной хук
├── useTopProfessions()    # Для топа профессий
└── useProfessionByName()  # Для деталей
```

#### UI Компоненты
```
src/components/cards/
├── DemandIndicator.tsx    # Индикатор уровня спроса
└── ProfessionCard.tsx     # Карточка профессии

src/components/sections/
└── ProfessionsSection.tsx # Секция на странице
```

### Функциональность для абитуриентов

#### 1. Просмотр востребованных профессий
- 83 профессии из официальных источников
- Фильтрация по уровню спроса (высокий/средний/низкий)
- Фильтрация по категориям (рабочие/служащие/специалисты)
- Поиск по названию

#### 2. Информация о каждой профессии
- Уровень востребованности (цветной индикатор)
- Средняя зарплата (от/до в BYN)
- Количество вакансий
- Город
- Связанные специальности вузов
- Описание
- Общий рейтинг (excellent/good/average/below_average)

#### 3. Статистика на странице
- Общее количество профессий
- Количество с высоким/низким спросом
- Средняя зарплата
- Топ-5 профессий по рейтингу

#### 4. Фильтрация и поиск
- Поиск по названию профессии
- Фильтр по уровню спроса
- Фильтр по категории
- Комбинированные фильтры
- Счетчик найденных результатов

---

## Структура базы данных

### Таблицы

#### profession_forecasts
```sql
- id (UUID, PK)
- profession_name (TEXT)
- category (TEXT: worker/employee/specialist)
- demand_level (TEXT: high/medium/low)
- forecast_year (INTEGER)
- source (TEXT)
- city (TEXT)
- description (TEXT)
- related_specialties (JSONB)
- created_at, updated_at (TIMESTAMP)
```

#### profession_salaries
```sql
- id (UUID, PK)
- profession_name (TEXT)
- search_query (TEXT)
- avg_salary (INTEGER)
- min_salary, max_salary (INTEGER)
- vacancies_count (INTEGER)
- city (TEXT)
- year, month (INTEGER)
- source (TEXT)
- created_at, updated_at (TIMESTAMP)
```

#### View: profession_analytics
Объединенное представление с автоматическим расчетом рейтинга

---

## Интеграция в страницу

Файл `src/pages/Applicants.tsx` обновлен:
- Добавлен импорт `ProfessionsSection`
- Добавлена секция "Востребованные профессии 2026" 
- Расположена между таблицей специальностей и секцией университетов

---

## Установка и запуск

### 1. Установить зависимости
```bash
cd scripts/data-collection
npm install
```

### 2. Собрать данные
```bash
# Собрать только прогнозы
npm run collect:forecasts

# Собрать только зарплаты
npm run collect:salaries

# Собрать всё
npm run collect:all
```

### 3. Применить миграции БД
```bash
# Supabase CLI
supabase db push

# Или через SQL Editor
# Выполнить: supabase/migrations/20250221_add_profession_tables.sql
```

### 4. Импортировать данные
```bash
# Supabase SQL Editor
# 1. Выполнить: output/profession-forecasts-2026.sql
# 2. Выполнить: output/profession-salaries-2026.sql
```

### 5. Запустить приложение
```bash
npm run dev
```

---

## Использование

После установки:
1. Открыть страницу `/applicants`
2. Прокрутить до секции "Востребованные профессии 2026"
3. Использовать фильтры для поиска
4. Кликать на карточки профессий (в будущем - откроется детальная информация)

---

## Примечания

### Типы Supabase
В файле `src/services/professionService.ts` есть приведение типов `(as any)` для обхода проверки типов Supabase. Это связано с тем, что новые таблицы не включены в сгенерированные типы.

Для исправления нужно запустить:
```bash
supabase gen types typescript --project-id <your-project-id> --schema public > src/integrations/supabase/types.ts
```

### Данные о зарплатах
Данные о зарплатах основаны на маркетинговых исследованиях. Для актуализации рекомендуется:
1. Использовать существующий парсер rabota.by
2. Запускать парсинг регулярно
3. Обновлять таблицу `profession_salaries`

### Обновление прогнозов
Прогнозы востребованности публикуются:
- Минтруд - обычно раз в год (декабрь/январь)
- Мингорисполком - раз в год

Для обновления нужно:
1. Проверить источники на наличие новых прогнозов
2. Обновить скрипты `collect-forecasts.ts`
3. Перегенерировать SQL
4. Импортировать в БД

---

## Дальнейшее развитие

### Приоритет 1 (Базовый функционал) ✅
- [x] Сбор данных из источников
- [x] Структура БД
- [x] API сервис
- [x] UI компоненты
- [x] Интеграция в страницу

### Приоритет 2 (Улучшение)
- [ ] Детальная страница профессии
- [ ] Графики зарплат по месяцам
- [ ] Карьерные пути с визуализацией
- [ ] Сравнение профессий
- [ ] Избранные профессии

### Приоритет 3 (Расширение)
- [ ] Автоматический парсинг rabota.by
- [ ] Интеграция с данными вузов
- [ ] Рекомендации на основе баллов ЦТ
- [ ] Экспорт в PDF
- [ ] Мобильная оптимизация

---

## Контакты и поддержка

При возникновении проблем:
1. Проверить логи в консоли браузера
2. Убедиться, что миграции применены
3. Проверить наличие данных в БД
4. Обратиться к документации в `scripts/data-collection/README.md`

---

## Лицензия

Данные получены из открытых источников и используются в образовательных целях.
